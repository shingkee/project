jQuery(document).ready(function(e){function n(e,n,a){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+a+'">'+(e?"<h4>"+e+"</h4>":"")+(n||"")+"</span></div></div>"}var a=e("#ekb-admin-page-wrap");(function(){function n(n,i){a.find(n+" > .nav_tab").on("click",function(){a.find(n+" > .nav_tab").removeClass("active"),e(this).addClass("active"),a.find(i+" > .ekb-admin-page-tab-panel").removeClass("active");var o=e(this).index()+1;a.find(i+" > .ekb-admin-page-tab-panel:nth-child( "+o+" ) ").addClass("active")})}n("#welcome_tab_nav","#welcome_panel_container"),n(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),n(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),n("#help_tabs_nav","#help_tab_panel")})(),e.fn.epkb_displayOnClick=function(n){var a=e.extend({content:null,class:"active",fadeSpeed:200},n),i=e(this);return i.on("click",function(n){n.stopPropagation(),e(a.content).fadeToggle(a.fadeSpeed),i.toggleClass(a.class),e(a.content).toggleClass("active-content")}),e(a.content).on("click",function(e){e.stopPropagation()}),i},function(n,a){e(n).epkb_displayOnClick({content:a}),e("body").on("click",function(){e(a).fadeOut(200),e(n).removeClass("active")})}(".more_tabs",".drop_down_tabs > ul"),a.find("#epkb_send_feedback").on("click",function(i){a.find(".required").remove(),e(".eckb-top-notice-message").html(""),i.preventDefault();var o=a.find("#your_feedback").val().trim(),t=a.find("#your_email").val().trim(),c=a.find("#your_name").val().trim(),s=!0;if(o||(a.find("#your_feedback").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),s=!1),t||(a.find("#your_email").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),s=!1),c||(a.find("#your_name").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),s=!1),0!=s){var r,l={action:"epkb_send_feedback",_wpnonce_epkb_send_feedback:e("#_wpnonce_epkb_send_feedback").val(),email:t,name:c,feedback:o};e.ajax({type:"POST",dataType:"json",data:l,url:ajaxurl,beforeSend:function(n){e("#epkb-ajax-in-progress").text("Sending feedback ...").dialog("open")}}).done(function(e){r=(e=e||"").error||void 0===e.message?e.message?e.message:n("",epkb_vars.reload_try_again,"error"):e.message}).fail(function(e,a,i){r=i?" ["+i+"]":epkb_vars.unknown_error,r=n(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,r,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),r&&(e(".eckb-top-notice-message").replaceWith(r),e("html, body").animate({scrollTop:0},"slow"))})}}),a.find(".ekb-feedback-btn").on("click",function(){a.find(".ekb-feedback-btn").removeClass("ekb-feedback-btn-active"),e(this).addClass("ekb-feedback-btn-active"),"feature-request"===e(this).attr("id")&&a.find("#epkb_feedback_form").show()}),a.find("#epkb_toggle_debug").on("click",function(){e(".eckb-top-notice-message").html("");var a,i={action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:e("#_wpnonce_epkb_toggle_debug").val()};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:i,beforeSend:function(n){e("#epkb-ajax-in-progress").text("Toggling debug ...").dialog("open")}}).done(function(e){(e=e||"").error||void 0===e.message?a=e.message?e.message:n("",epkb_vars.reload_try_again,"error"):window.location.href=window.location.href+"&info_tab=debug"}).fail(function(e,i,o){a=o?" ["+o+"]":epkb_vars.unknown_error,a=n(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,a,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),a&&(e(".eckb-top-notice-message").replaceWith(a),e("html, body").animate({scrollTop:0},"slow"))})}),a.find("#close_intro").on("click",function(){a.find(".welcome_header").hide();var n={action:"epkb_close_welcome_header"};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:n})}),a.find(".featured_img").on("click",function(n){n.preventDefault(),n.stopPropagation(),a.find(".image_zoom").remove();var i,o=e(this).find("img");i=o.length>1?e(o[0]).is(":visible")?e(o[0]).attr("src"):e(o[1]).is(":visible")?e(o[1]).attr("src"):e(o[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+i+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").bind("click.epkb",function(){e("#epkb_image_zoom").remove(),e("html, body").unbind("click.epkb")})}),e("#kb_name").on("keyup",function(){var n=25-e(this).val().length;e("#character_value").remove(),n<0&&e(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),e("#epkb-welcome-page-img1-thumb").on("click",function(){e("#epkb-welcome-page-img1").show(),e("#epkb-welcome-page-img2").hide(),e("#epkb-welcome-page-img3").hide()}),e("#epkb-welcome-page-img2-thumb").on("click",function(){e("#epkb-welcome-page-img2").show(),e("#epkb-welcome-page-img1").hide(),e("#epkb-welcome-page-img3").hide()}),e("#epkb-welcome-page-img3-thumb").on("click",function(){e("#epkb-welcome-page-img3").show(),e("#epkb-welcome-page-img1").hide(),e("#epkb-welcome-page-img2").hide()}),e("#add_on_panels").on("click",".ep_font_icon_info",function(){e(this).parent().find(".ep_font_icon_info_content").toggle()}),function(){var n=e("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){e(this).dialog("close")}},close:function(){e("#epkb-dialog-info-icon-msg").html()}});a.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var a=!1,i="",o=e(this).parent().find(".label").text();o=o||"";var t=e(this).find("p").html();if(t){var c=t.split("@");t=c[0]?c[0]:"Help text is coming soon.",c[1]&&(a=!0,i='<img class="epkb-help-image" src="'+c[1]+'">')}else t="Help text is coming soon.";e("#epkb-dialog-info-icon-msg").html("<p>"+t+"</p><br/>"+i),n.dialog({title:o,width:a?1e3:400,maxHeight:a?750:300,open:function(){e("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){n.dialog("option",{position:{my:"center",at:"center",of:window}})}),e(".ui-widget-overlay").bind("click",function(){e("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),e("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),e(".ui-dialog-titlebar").hide(),a.on("click",".eckb-tooltip-button",function(){e(this).parent().find(".eckb-tooltip-contents").fadeToggle()})}()});